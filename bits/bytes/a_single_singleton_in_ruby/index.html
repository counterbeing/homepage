<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="generator" content="Hugo 0.44" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Single Singleton in Ruby | Bits and Blocks</title>
    <meta name="description" content="What is a singleton anyway?">
    <meta name="keywords" content="ruby">
    
    
    
    
    

  <meta name="author" content="Cory Logan">


    <meta property="og:title" content="A Single Singleton in Ruby" />
<meta property="og:description" content="What is a singleton anyway?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.corylogan.com/bits/bytes/a_single_singleton_in_ruby/" />



<meta property="article:published_time" content="2016-12-13T18:22:26-08:00"/>

<meta property="article:modified_time" content="2016-12-13T18:22:26-08:00"/>











    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A Single Singleton in Ruby"/>
<meta name="twitter:description" content="What is a singleton anyway?"/>

    




    

    <meta name="theme-color" content="#000">

    
    
  <meta name="referrer" content="same-origin">


    
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-19114773-9', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
    <link rel="canonical" href="https://www.corylogan.com/bits/bytes/a_single_singleton_in_ruby/">
    
    
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAIAAABMXPacAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDY4RTI2NzlCQjE3MTFFNkJFNDk5M0JFQjc5MEIzNEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDY4RTI2N0FCQjE3MTFFNkJFNDk5M0JFQjc5MEIzNEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNjhFMjY3N0JCMTcxMUU2QkU0OTkzQkVCNzkwQjM0RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNjhFMjY3OEJCMTcxMUU2QkU0OTkzQkVCNzkwQjM0RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn+zX8oAAAVdSURBVHja7J07bFNXGMfvDX7VdoyNfW0IpAQpSQMKbSolCopohBRFRJ0QU8kWJgZEB1hYGFhAfSxVh07JBp0qpC6gCqlKEaKKh1RENAqRSBuC8CPYdWzXLzAfssRQIUTK/c495/j/W6PY3//+rs/Dvve7ZvPjqwZwjg4cAgiAAAABEAAgAAIABEAAgAAIABAAAQACIABAAAQACIAAAAEQACAAAgAEQACAAAgAEAABAAK0wKVElU/qhaVKarmaXq1trtVyG/VCplHMP6+Um3X6q990h3f4LFdwrzvU44n0eqID3vigL9HlDskfzZT2/oCm0ZwvPbpTWrtXXl8or6caxW39e8IVHPF3H/F3Hw30jAcOmIYJAe/K/crTm1srt7ZWbhdXbXnBiWDv8c7+qc7+w77dEPA26JT/6Z+lG4UHf9Vytr/4fk/kROjQyZ2D9IGAgP+yUH58Lb94Pb+43aFmu9DQdCo8NB0eGvHvg4BXZBul2Vxy7llyuZoR9qYDXmtm1/DpyHDMFWhrAb8UH/6w+TsNO468Ow1HZ6Kjk8G+Nl2Gfr9597vs3YfVrFMFkHia8M/Fxs5Gx9pLQLpR/CYz/23mtxe02nQU0v/lxs9/1/IXrPG4K9gWAijzlfSvc7mkJOsQOgm+zsxnG+WL8WN93pjmAv6spi+nbv+Y/0O29TidEP8265cSEwe9cZHv2yH43Jfz6Legwqg8wXOSOAE07tPII+3Rf+2Aikwz70WcEUCzrjzj/tvHIipVNwG04qQ1j6EIVCoVrI8A2m3Ret/xFee21kVUMJWtg4Bso0R7XQd3W/97vUBlU/HKC5jNJZ36puH998mz/JMWr4CF8uO5Z0lDWah4iqCwgGv5RZHfcdoOFU8RVBUwX3p0nbl6AVAECqKkABpDUwJ3NExQBNY5jEvA/crTG4UHhhZQEIqjmICbWyscv+s6AgWhOCoJaBrNW2wVOwLFafJsJFkE0Kxl1xUlkkBxmKZiFgF3SmuGdjCFYhFwr7yunwCmUPYLeFIvLOgogEJRNAUELFVSGiz/37ghoGgKCFiupg1N4Yhmv4DV2qauAjii2S9gTZf9l5ho9gvYYJipJGFDiUk4o+MMzBfNfgH55xVdBXBEs19A674tLeGIhrskHcZ+AX7TrevB4ohmv4DwDp+uAjii2S/AcuIqezFwRLNfwF4Vbo+WJ5r9Ano8EV0FcESzX0CvJ6qrAI5o9gsYEHuHiUg4otkvYNCXSOg4D1MoiqaAgC53aMTfrZ8ACtWlxCRMHNFRAFMoFgFHAz36CWAKxSJgPHBgItir09GnOEw9VlgEmIZ5vLNfJwEUh6nlE9e3oVOd/ft12ZFRkCm284lLwGHf7hOhQ3oIoCB8rbYYfw84uXNQgw0BRaAgfK/PKIBmrVPhIdUFUATWFme8v4hNh4cGvJbK3z1Y08znEK+AEf++mV3D6gqg4rlby7H/Jnw6Msw6hrLOYVQ897uwC4i5Ameio+IbIb0nVDCVLaCln4irIiaDfediYx2y9q5900ExqWAxzfwEXZZyNjp23vpMFQFUqrA2fuKuC7pgjc9EFJiQqUgqVeCnTRRxV/Bi/NgX4U9kPvpUHhUpsn2i0CvjaGa7lJiQ1gEVRuUJXi+I7pp40Bu/nJj8wHTL1r6MRp62aFvZ+hxc3TMVc/llaNzaWvPQrNtGjVtb88FXez7/0BN2tnVx62xox9bFr9emH3ktNO92Egr/qa9r1N+N9vUOgwc4SAEeYSIFeIiPFOAxVhKBB7kBvm0ggAAIABAAAQACIABAAAQACIAAAAEQACAAAgAEQACAAAgAEAABAAJ05KUAAwAFq0MGgK1C9QAAAABJRU5ErkJggg==">

    <style>
  html{font-size:12px}*{box-sizing:border-box;text-rendering:geometricPrecision}body{font-size:1rem;line-height:1.5rem;margin:0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;word-wrap:break-word}h1,h2,h3,h4,h5,h6{line-height:1.3em}fieldset{border:none;padding:0;margin:0}pre{padding:2rem;margin:1.75rem 0;background-color:#fff;border:1px solid #ccc;overflow:auto}code[class*=language-],pre[class*=language-],pre code{font-weight:100;text-shadow:none;margin:1.75rem 0}a{cursor:pointer;color:#ff2e88;text-decoration:none;border-bottom:1px solid #ff2e88}a:hover{background-color:#ff2e88;color:#fff}.grid{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.grid.\-top{-ms-flex-align:start;-ms-grid-row-align:flex-start;align-items:flex-start}.grid.\-middle{-ms-flex-align:center;-ms-grid-row-align:center;align-items:center}.grid.\-bottom{-ms-flex-align:end;-ms-grid-row-align:flex-end;align-items:flex-end}.grid.\-stretch{-ms-flex-align:stretch;-ms-grid-row-align:stretch;align-items:stretch}.grid.\-baseline{-ms-flex-align:baseline;-ms-grid-row-align:baseline;align-items:baseline}.grid.\-left{-ms-flex-pack:start;justify-content:flex-start}.grid.\-center{-ms-flex-pack:center;justify-content:center}.grid.\-right{-ms-flex-pack:end;justify-content:flex-end}.grid.\-between{-ms-flex-pack:justify;justify-content:space-between}.grid.\-around{-ms-flex-pack:distribute;justify-content:space-around}.cell{-ms-flex:1;flex:1;box-sizing:border-box}@media screen and (min-width:768px){.cell.\-1of12{-ms-flex:0 0 8.33333%;flex:0 0 8.33333%}.cell.\-2of12{-ms-flex:0 0 16.66667%;flex:0 0 16.66667%}.cell.\-3of12{-ms-flex:0 0 25%;flex:0 0 25%}.cell.\-4of12{-ms-flex:0 0 33.33333%;flex:0 0 33.33333%}.cell.\-5of12{-ms-flex:0 0 41.66667%;flex:0 0 41.66667%}.cell.\-6of12{-ms-flex:0 0 50%;flex:0 0 50%}.cell.\-7of12{-ms-flex:0 0 58.33333%;flex:0 0 58.33333%}.cell.\-8of12{-ms-flex:0 0 66.66667%;flex:0 0 66.66667%}.cell.\-9of12{-ms-flex:0 0 75%;flex:0 0 75%}.cell.\-10of12{-ms-flex:0 0 83.33333%;flex:0 0 83.33333%}.cell.\-11of12{-ms-flex:0 0 91.66667%;flex:0 0 91.66667%}}@media screen and (max-width:768px){.grid{-ms-flex-direction:column;flex-direction:column}.cell{-ms-flex:0 0 auto;flex:0 0 auto}}.hack,.hack blockquote,.hack code,.hack em,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack strong{font-size:1rem;font-style:normal;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif}.hack blockquote,.hack code,.hack em,.hack strong{line-height:20px}.hack blockquote,.hack code,.hack footer,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack header,.hack li,.hack ol,.hack p,.hack section,.hack ul{float:none;margin:0;padding:0}.hack blockquote,.hack h1,.hack ol,.hack p,.hack ul{margin-top:20px;margin-bottom:20px}.hack h1{position:relative;display:inline-block;display:table-cell;padding:20px 0 30px;margin:0;overflow:hidden}.hack h1:after{content:"====================================================================================================";position:absolute;bottom:10px;left:0}.hack h1+*{margin-top:0}.hack h2,.hack h3,.hack h4,.hack h5,.hack h6{position:relative;margin-bottom:1.75rem}.hack h2:before,.hack h3:before,.hack h4:before,.hack h5:before,.hack h6:before{display:inline}.hack h2:before{content:"## "}.hack h3:before{content:"### "}.hack h4:before{content:"#### "}.hack h5:before{content:"##### "}.hack h6:before{content:"###### "}.hack li{position:relative;display:block;padding-left:20px}.hack li:after{position:absolute;top:0;left:0}.hack ul>li:after{content:"-"}.hack ol{counter-reset:a}.hack ol>li:after{content:counter(a) ".";counter-increment:a}.hack blockquote{position:relative;padding-left:17px;padding-left:2ch;overflow:hidden}.hack blockquote:after{content:">\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>";white-space:pre;position:absolute;top:0;left:0;line-height:20px}.hack em:after,.hack em:before{content:"*";display:inline}.hack pre code:after,.hack pre code:before{content:''}.hack code{font-weight:700}.hack code:after,.hack code:before{content:"`";display:inline}.hack hr{position:relative;height:20px;overflow:hidden;border:0;margin:20px 0}.hack hr:after{content:"----------------------------------------------------------------------------------------------------";position:absolute;top:0;left:0;line-height:20px;width:100%;word-wrap:break-word}@-moz-document url-prefix(){.hack h1{display:block}}.hack-ones ol>li:after{content:"1."}p{margin:0 0 1.75rem}.container{max-width:70rem}.container,.container-fluid{margin:0 auto;padding:0 1rem}.inner{padding:1rem}.inner2x{padding:2rem}.pull-left{float:left}.pull-right{float:right}.progress-bar{height:8px;opacity:.8;background-color:#ccc;margin-top:12px}.progress-bar.progress-bar-show-percent{margin-top:38px}.progress-bar-filled{background-color:gray;height:100%;transition:width .3s ease;position:relative;width:0}.progress-bar-filled:before{content:'';border:6px solid transparent;border-top-color:gray;position:absolute;top:-12px;right:-6px}.progress-bar-filled:after{color:gray;content:attr(data-filled);display:block;font-size:12px;white-space:nowrap;position:absolute;border:6px solid transparent;top:-38px;right:0;-ms-transform:translateX(50%);transform:translateX(50%)}table{width:100%;border-collapse:collapse;margin:1.75rem 0;color:#778087}table td,table th{vertical-align:top;border:1px solid #ccc;line-height:15px;padding:10px}table thead th{font-size:10px}table tbody td:first-child{font-weight:700;color:#333}.form{width:30rem}.form-group{margin-bottom:1.75rem;overflow:auto}.form-group label{border-bottom:2px solid #ccc;color:#333;width:10rem;display:inline-block;height:38px;line-height:38px;padding:0;float:left;position:relative}.form-group.form-success label{color:#4caf50!important;border-color:#4caf50!important}.form-group.form-warning label{color:#ff9800!important;border-color:#ff9800!important}.form-group.form-error label{color:#f44336!important;border-color:#f44336!important}.form-control{outline:none;border:none;border-bottom:2px solid #ccc;padding:.5rem 0;width:20rem;height:38px;background-color:transparent}.form-control:focus{border-color:#555}.form-group.form-textarea label:after{position:absolute;content:'';width:2px;background-color:#fff;right:-2px;top:0;bottom:0}textarea.form-control{height:auto;resize:none;padding:1rem 0;border-bottom:2px solid #ccc;border-left:2px solid #ccc;padding:.5rem}select.form-control{border-radius:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none}.help-block{color:#999;margin-top:.5rem}.form-actions{margin-bottom:1.75rem}.btn{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;outline:none;padding:.65rem 2rem;font-size:1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;z-index:1}.btn:active{box-shadow:inset 0 1px 3px rgba(0,0,0,.12)}.btn.btn-ghost{border-color:#757575;color:#757575;background-color:transparent}.btn.btn-ghost:focus,.btn.btn-ghost:hover{border-color:#424242;color:#424242;z-index:2}.btn.btn-ghost:hover{background-color:transparent}.btn-block{width:100%;display:-ms-flexbox;display:flex}.btn-default{color:#fff;background-color:#e0e0e0;border:1px solid #e0e0e0;color:#333}.btn-default:focus:not(.btn-ghost),.btn-default:hover{background-color:#dcdcdc;border-color:#dcdcdc}.btn-success{color:#fff;background-color:#4caf50;border:1px solid #4caf50}.btn-success:focus:not(.btn-ghost),.btn-success:hover{background-color:#43a047;border-color:#43a047}.btn-success.btn-ghost{border-color:#4caf50;color:#4caf50}.btn-success.btn-ghost:focus,.btn-success.btn-ghost:hover{border-color:#388e3c;color:#388e3c;z-index:2}.btn-error{color:#fff;background-color:#f44336;border:1px solid #f44336}.btn-error:focus:not(.btn-ghost),.btn-error:hover{background-color:#e53935;border-color:#e53935}.btn-error.btn-ghost{border-color:#f44336;color:#f44336}.btn-error.btn-ghost:focus,.btn-error.btn-ghost:hover{border-color:#d32f2f;color:#d32f2f;z-index:2}.btn-warning{color:#fff;background-color:#ff9800;border:1px solid #ff9800}.btn-warning:focus:not(.btn-ghost),.btn-warning:hover{background-color:#fb8c00;border-color:#fb8c00}.btn-warning.btn-ghost{border-color:#ff9800;color:#ff9800}.btn-warning.btn-ghost:focus,.btn-warning.btn-ghost:hover{border-color:#f57c00;color:#f57c00;z-index:2}.btn-info{color:#fff;background-color:#00bcd4;border:1px solid #00bcd4}.btn-info:focus:not(.btn-ghost),.btn-info:hover{background-color:#00acc1;border-color:#00acc1}.btn-info.btn-ghost{border-color:#00bcd4;color:#00bcd4}.btn-info.btn-ghost:focus,.btn-info.btn-ghost:hover{border-color:#0097a7;color:#0097a7;z-index:2}.btn-primary{color:#fff;background-color:#2196f3;border:1px solid #2196f3}.btn-primary:focus:not(.btn-ghost),.btn-primary:hover{background-color:#1e88e5;border-color:#1e88e5}.btn-primary.btn-ghost{border-color:#2196f3;color:#2196f3}.btn-primary.btn-ghost:focus,.btn-primary.btn-ghost:hover{border-color:#1976d2;color:#1976d2;z-index:2}.btn-group{overflow:auto}.btn-group .btn{float:left}.btn-group .btn-ghost:not(:first-child){margin-left:-1px}.card{border:1px solid #ccc}.card .card-header{color:#333;text-align:center;background-color:#ddd;padding:.5rem 0}.alert{color:#ccc;padding:1rem;border:1px solid #ccc;margin-bottom:1.75rem}.alert-success{color:#4caf50;border-color:#4caf50}.alert-error{color:#f44336;border-color:#f44336}.alert-info{color:#00bcd4;border-color:#00bcd4}.alert-warning{color:#ff9800;border-color:#ff9800}.media:not(:last-child){margin-bottom:1.25rem}.media-left{padding-right:1rem}.media-left,.media-right{display:table-cell;vertical-align:top}.media-right{padding-left:1rem}.media-body{display:table-cell;vertical-align:top}.media-heading{font-size:1.16667rem;font-weight:700}.media-content{margin-top:.3rem}.avatarholder,.placeholder{background-color:#f0f0f0;text-align:center;color:#b9b9b9;font-size:1rem;border:1px solid #f0f0f0}.avatarholder{width:48px;height:48px;line-height:46px;font-size:2rem;background-size:cover;background-position:50%;background-repeat:no-repeat}.avatarholder.rounded{border-radius:33px}.loading{display:inline-block;content:'&nbsp;';height:20px;width:20px;margin:0 .5rem;animation:a .6s infinite linear;border:2px solid #e91e63;border-right-color:transparent;border-radius:50%}.btn .loading{margin-bottom:0;width:14px;height:14px}.btn div.loading{float:left}.alert .loading{margin-bottom:-5px}@keyframes a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.menu{width:100%}.menu .menu-item{display:block;color:#616161;border-color:#616161}.menu .menu-item.active,.menu .menu-item:hover{color:#000;border-color:#000;background-color:transparent}@media screen and (max-width:768px){.form-group label{display:block;border-bottom:none;width:100%}.form-group.form-textarea label:after{display:none}.form-control{width:100%}textarea.form-control{border-left:none;padding:.5rem 0}pre::-webkit-scrollbar{height:3px}}@media screen and (max-width:480px){.form{width:100%}}.dark{color:#ccc}.dark,.dark pre{background-color:#000}.dark pre{padding:0;border:none}.dark pre code{color:#00bcd4}.dark h1 a,.dark h2 a,.dark h3 a,.dark h4 a,.dark h5 a{color:#ccc}.dark code,.dark strong{color:#fff}.dark code{font-weight:100}.dark table{color:#ccc}.dark table td,.dark table th{border-color:#444}.dark table tbody td:first-child{color:#fff}.dark .form-group label{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-group.form-textarea label:after{background-color:#000}.dark .form-control{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-control:focus{border-color:#ccc;color:#ccc}.dark textarea.form-control{color:#ccc}.dark .card{border-color:rgba(95,95,95,.78)}.dark .card .card-header{background-color:transparent;color:#ccc;border-bottom:1px solid rgba(95,95,95,.78)}.dark .btn.btn-ghost.btn-default{border-color:#ababab;color:#ababab}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#9c9c9c;color:#9c9c9c;z-index:1}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#e0e0e0;color:#e0e0e0}.dark .btn.btn-ghost.btn-primary:focus,.dark .btn.btn-ghost.btn-primary:hover{border-color:#64b5f6;color:#64b5f6}.dark .btn.btn-ghost.btn-success:focus,.dark .btn.btn-ghost.btn-success:hover{border-color:#81c784;color:#81c784}.dark .btn.btn-ghost.btn-info:focus,.dark .btn.btn-ghost.btn-info:hover{border-color:#4dd0e1;color:#4dd0e1}.dark .btn.btn-ghost.btn-error:focus,.dark .btn.btn-ghost.btn-error:hover{border-color:#e57373;color:#e57373}.dark .btn.btn-ghost.btn-warning:focus,.dark .btn.btn-ghost.btn-warning:hover{border-color:#ffb74d;color:#ffb74d}.dark .avatarholder,.dark .placeholder{background-color:transparent;border-color:#333}.dark .menu .menu-item{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .menu .menu-item.active,.dark .menu .menu-item:hover{color:#fff;border-color:#ccc}
  :root {
  --screen-size-small: 30em; /* breakpoint reference only */
}
@keyframes intro {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.blur-up {
  -webkit-filter: blur(5px);
  filter: blur(5px);
  transition: filter 400ms, -webkit-filter 400ms;
}
.blur-up.lazyloaded {
  -webkit-filter: blur(0);
  filter: blur(0);
}
.muted,
.hack .help-block {
  color: #e0e0e070;
}
.hack .readmore {
  margin-bottom: 2.2em;
}
.responsive-iframe {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 */
  padding-top: 25px;
  height: 0;
}
.responsive-iframe iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
iframe {
  border: 0;
}
main, footer {
  animation: intro 0.3s both;
  animation-delay: 0.15s;
}
footer time[datetime$="M"]:before {
  content: "\2013\0020";
}
@media only screen
  and ( max-width: 30em ) {
  footer time[datetime$="M"] {
    display: none;
  }
}
blockquote cite {
  display: block;
}
blockquote cite::before {
   content: "\2014";
}
:target {
  color: #fff;
}
/* hack.css overrides and enhancements */
.hack li ul {
  margin: 0;
}
.main {
  padding: 20px 10px;
}
input.form-control {
  border-radius: 0;
  background-color: transparent;
  -webkit-appearance: none;
  -moz-appearance: none;
  -ms-appearance: none;
}
input.form-control {
  font-size: initial;
}
.hack .help-block {
  font-size: 1rem;
}
nav a.active {
  background-color: #ff2e88;
  color: #fff;
}
a[itemprop="url"] {
  color: #ff9800;
}
a[itemprop="url"]:hover {
  color: #fff;
}
a[href*="://"]::after,
a[rel*="external"] {
  content: " " url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20class='i-external'%20viewBox='0%200%2032%2032'%20width='14'%20height='14'%20fill='none'%20stroke='%23ff9800'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='9.38%'%3E%3Cpath%20d='M14%209%20L3%209%203%2029%2023%2029%2023%2018%20M18%204%20L28%204%2028%2014%20M28%204%20L14%2018'/%3E%3C/svg%3E");
}
figure a[href*="://"]::after,
figure a[rel*="external"] {
  content: "";
}
html {
  font-size: 13px;
}
.hack pre {
  font-size: 17px;
}
.hack .form input,
.hack .form textarea,
.hack .form button,
.hack .form label {
  font-size: 1rem;
}
article [itemprop="description"] {
  margin-bottom: 20px;
  margin-top: 20px;
}
article header img {
  width: 100%;
  border-radius: 3px;
}
@media screen and (min-width: 768px) {
  html {
    font-size: 1em;
  }
  .container {
    max-width: 50rem;
  }
}
[v-cloak] {
  display: none;
}

  article img {
  width: 100%;
}

.hack h1 {
  font-size: 2.2em;
}

.hack h2 {
  font-size: 1.5em;
}

.hack h3 {
  font-size: 1.2em;
}

.dark code {
  color: #ff2e88;
}

/* body {
  background-color: red !important;
} */

[itemprop="articleBody"] img {
    width: 100%;
}

</style>

    <script async src=/bits/js/lazysizes.min.js></script>

  <script async src=/bits/js/bpgdec8a.js></script>
  <script async src=/bits/js/bpgdec8.js></script>
  <script async src=/bits/js/bpgdec.js></script>


  </head>
  
  <body class="hack dark main container">
    <header>
  
  <nav itemscope itemtype="http://schema.org/SiteNavigationElement">
    
    
      <a itemprop="url" class="" href="/bits/bits/"><span itemprop="name">Bits</span></a>
    
      <a itemprop="url" class="active" href="/bits/bytes/"><span itemprop="name">Bytes</span></a>
    
  </nav>


</header>
    <main>
  <article itemscope itemtype="http://schema.org/BlogPosting">
    
<meta itemprop="name" content="A Single Singleton in Ruby">
<meta itemprop="description" content="What is a singleton anyway?">


<meta itemprop="datePublished" content="2016-12-13T18:22:26-08:00" />
<meta itemprop="dateModified" content="2016-12-13T18:22:26-08:00" />
<meta itemprop="wordCount" content="742">



<meta itemprop="keywords" content="ruby," />

    <header>
      <h1 itemprop="headline">A Single Singleton in Ruby</h1>
      <p class="muted">
        <svg style="margin-bottom:-3px" class="i-clock" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <circle cx="16" cy="16" r="14" />
  <path d="M16 8 L16 16 20 20" />
</svg>
<span>4 minute read</span>
<svg style="margin-bottom: -3px" class="i-edit" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z" />
</svg>

  Published: <time datetime="2016-12-13T18:22:26-08:00">13 Dec, 2016</time>


      </p>
      
        <blockquote itemprop="description">What is a singleton anyway?</blockquote>
      
      
    </header>
    
  <details>
    <summary>Table of Contents</summary>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#the-singleton-design-pattern">The singleton design pattern</a></li>
<li><a href="#why-do-i-care">Why do I care?</a></li>
<li><a href="#what-does-it-do">What does it do?</a></li>
<li><a href="#how-should-i-implement-it">How should I implement it?</a></li>
</ul></li>
</ul>
</nav>
  </details>
  <script>
    (function (window, document, undefined) {
      const el = document.querySelector('details summary');
      el.onclick = () => {
        (function(l,o,a,d,e,r){e=o.createElement(a),r=o.getElementsByTagName(a)[0];e.async=1;e.src=d;r.parentNode.insertBefore(e,r)})(window,document,'script','\/bits\/js\/smoothscroll.js');
        el.onclick = null;
      };
      document.querySelectorAll('#TableOfContents a').forEach(link => {
        link.addEventListener('click', (evt) => {
          evt.preventDefault();
          const selector = link.href.slice(link.href.indexOf('#'));
          document.querySelector(
            selector
          ).scrollIntoView({ behavior: 'smooth' });
          window.history.pushState({}, "", selector);
        });
      });
    })(window, document);
  </script>


    <div itemprop="articleBody">
      

<h2 id="the-singleton-design-pattern">The singleton design pattern</h2>

<p>I&rsquo;m relatively new the the concept of the singleton, even though I&rsquo;ve been programming for a number of years. I&rsquo;ve run into several instances in which I new that this was exactly what I needed, but did not have a name for it. Here, I&rsquo;m going to try to explain it to myself a year ago. There are a few questions I&rsquo;ll try to address.</p>

<ul>
<li>Why do I care?</li>
<li>What does it do?</li>
<li>How should I implement it?</li>
</ul>

<h2 id="why-do-i-care">Why do I care?</h2>

<p>A lot has been written on design patters, and by people with a lot more experience than myself. I&rsquo;d recommend picking up a book on the topic and learning a bit more if it&rsquo;s a new concept to you. Each one of these patterns is a tool that you can use to solve problems that have been solved over and over again. They can hasten, and solidify your development, as well as give you a way to succinctly communicate big ideas.</p>

<p>This particular pattern generally comes into play when you need some kind of global object to not only provide a set of methods, but also manage some kind of global state.</p>

<h2 id="what-does-it-do">What does it do?</h2>

<p>I&rsquo;ll give you a real world example to help make the point. In working on an application that was in charge of sifting through large piles of data, and alerting a person for errors several times a day, I needed a way to keep track of the errors in memory. It also needed to be available to many different classes in the application.</p>

<p>The singleton fits this almost perfectly.</p>

<p>I&rsquo;ll admit, there are many cases when it&rsquo;s a poor choice for the pattern to use. Any time you only need state for a little while, or if you need more than a handful of methods on an object.</p>

<p>In essence, the singleton is for simple objects that are action based, and that you only want one of in the instance of your application.</p>

<h2 id="how-should-i-implement-it">How should I implement it?</h2>

<p>There are different ways to implement the singleton pattern. Let&rsquo;s first go over an example of the pattern implemented by hand, so that you can see how it works, before we try to hide some of the details. We&rsquo;ll stick with the error logger example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ErrorLogger</span>
  <span style="color:#75715e"># This prevents the class from being instantiated. With a sigleton, we don&#39;t</span>
  <span style="color:#75715e"># want more than one instance. That&#39;s pretty much the definition.</span>
  private_class_method <span style="color:#e6db74">:new</span>

  <span style="color:#75715e"># This class variable will be in charge of storing the global state of our</span>
  <span style="color:#75715e"># singleton in memory. All of the information will end up here. We&#39;ll access</span>
  <span style="color:#75715e"># it through another method of our choosing.</span>
  @@log <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>

  <span style="color:#75715e"># Everything inside of this will be declared as a class method.</span>
  <span style="color:#66d9ef">class</span> <span style="color:#f92672">&lt;&lt;</span> self
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">log_an_error</span>(error)
      @@log <span style="color:#f92672">&lt;&lt;</span> error
    <span style="color:#66d9ef">end</span>

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">print_log</span>
      @@log<span style="color:#f92672">.</span>inspect
    <span style="color:#66d9ef">end</span>
  <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">ErrorLogger</span><span style="color:#f92672">.</span>log_an_error(<span style="color:#e6db74">&#39;Server is on fire!&#39;</span>)
<span style="color:#66d9ef">ErrorLogger</span><span style="color:#f92672">.</span>print_log <span style="color:#75715e"># =&gt; [&#34;Server is on fire&#34;]</span></code></pre></div>
<p>There are other implementations of the singleton, but I prefer to simply have the class expose any methods directly on itself. Some other singletons have the class create a single instance of itself, and all methods are instance methods, and in that case you can use instance variables.</p>

<p>But, this can be simplified further with the help of ruby&rsquo;s built in <a href="https://ruby-doc.org/stdlib-2.3.0/libdoc/singleton/rdoc/Singleton.html">singleton module</a>. The one gotcha here, is that calling it behaves a little differently. These are now instance methods and must be called on the instance.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">require <span style="color:#e6db74">&#39;singleton&#39;</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ErrorLogger</span>
  <span style="color:#66d9ef">include</span> <span style="color:#66d9ef">Singleton</span>

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">initialize</span>
    @log <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>
  <span style="color:#66d9ef">end</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">log_an_error</span>(error)
    @log <span style="color:#f92672">&lt;&lt;</span> error
  <span style="color:#66d9ef">end</span>

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">print_log</span>
    @log<span style="color:#f92672">.</span>inspect
  <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>

error_logger <span style="color:#f92672">=</span> <span style="color:#66d9ef">ErrorLogger</span><span style="color:#f92672">.</span>instance
error_logger<span style="color:#f92672">.</span>log_an_error(<span style="color:#e6db74">&#39;Killing me softly...&#39;</span>)
error_logger<span style="color:#f92672">.</span>print_log <span style="color:#75715e"># =&gt; [&#34;Killing me softly...&#34;]</span></code></pre></div>
<p>In my opinion, it doesn&rsquo;t look much better than the first example. But, it does avoid the use of class variables, which is nice.</p>

<p>I think though, the one that I&rsquo;ll probably reach for next time, is using module methods on a module. I know that this overlooks a few things, like the fact that modules can be mixed into classes, and you don&rsquo;t really want that with a singleton. But, I&rsquo;d say, in all practical terms, just don&rsquo;t do that.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">module</span> ErrorLogger
  <span style="color:#66d9ef">class</span> <span style="color:#f92672">&lt;&lt;</span> self
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">log</span>
      @log <span style="color:#f92672">||=</span> <span style="color:#f92672">[]</span>
    <span style="color:#66d9ef">end</span>

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">log_an_error</span>(error)
      log <span style="color:#f92672">&lt;&lt;</span> error
    <span style="color:#66d9ef">end</span>

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">print_log</span>
      log<span style="color:#f92672">.</span>inspect
    <span style="color:#66d9ef">end</span>
  <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">ErrorLogger</span><span style="color:#f92672">.</span>log_an_error(<span style="color:#e6db74">&#39;Whoops!&#39;</span>)
<span style="color:#66d9ef">ErrorLogger</span><span style="color:#f92672">.</span>print_log <span style="color:#75715e"># =&gt; [&#34;Whoops!&#34;]</span></code></pre></div>
<p>There are other great articles that dive further into the topic. I&rsquo;d really recommend <a href="http://practicingruby.com/articles/ruby-and-the-singleton-pattern-dont-get-along">Practicing Ruby&rsquo;s take on the topic</a>.</p>

    </div>
    
    <footer>
      <hr>
      <p>
  Published
  
    
      by <span itemprop="author">Cory Logan</span>
    
  
  <time itemprop="datePublished" datetime="2016-12-13T18:22:26-08:00">
    13 Dec, 2016
  </time>
  
  
    and tagged <a href="/bits/tags/ruby/">ruby</a>
  
  using <span itemprop="wordCount">742</span> words.
</p>

      


  <aside>
    <header>Related Content</header>
    <ul>
      
        <li><a href="/bits/bytes/the_mysteries_of_the_ruby_heredoc/">The Mysteries of the Ruby Heredoc</a>
        <time datetime="4M">4 minutes</time>
      
    </ul>
  </aside>


    </footer>
  </article>
</main>
    <footer>
  

</footer>
  </body>
</html>
