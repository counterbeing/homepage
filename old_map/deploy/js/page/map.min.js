/*! corylogan.com - v0.0.1 - 2016-11-12
* http://www.corylogan.com/
* Copyright (c) 2016 ; Licensed  */
var allPlaces="",previousMarker=null,map="",currentUID="",updateMapByMarker=function(a){previousMarker&&previousMarker.setIcon("images/red-marker.png"),a.setIcon("images/yellow-marker.png"),map.panTo(a.getPosition()),previousMarker=a},getMarkerByUID=function(a){var b=_.where(allPlaces,{uid:a});return b[0].marker},getUIDByMarker=function(a){var b=_.where(allPlaces,{marker:a});return b[0].uid};!function(a){var b=a.sammy(function(){this.get("#:page",function(){currentUID=this.params.page,console.log(currentUID);var b="posts/src/posts/"+currentUID+"/post.html";a("#blog-content").load(b+" #content",function(){a("#blog-content").scrollTop(0)});var c=getMarkerByUID(this.params.page);updateMapByMarker(c)}),a(function(){b.run()})})}(jQuery),$(document).ready(function(){function a(){var a=[{stylers:[{hue:"#00ffe6"},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}],b=new google.maps.StyledMapType(a,{name:"Styled Map"}),c={zoom:5,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map-canvas"),c),map.mapTypes.set("map_style",b),map.setMapTypeId("map_style");var d="";$.getJSON("data/places.json",function(a){allPlaces=a,""===currentUID&&(currentUID=_.last(allPlaces).uid),document.location.hash=currentUID,$.each(a,function(a,b){var c=new google.maps.LatLng(b.latitude,b.longitude);if(this.marker=new google.maps.Marker({position:c,icon:"images/red-marker.png",map:map,title:b.city}),google.maps.event.addListener(this.marker,"click",function(){updateMapByMarker(this);var a=getUIDByMarker(this);document.location.hash=a}),""!=d){new google.maps.Polyline({path:[c,d],strokeColor:"#FF62CC",map:map,strokeOpacity:.5,strokeWeight:8})}d=c});var b=_.last(a);map.panTo(new google.maps.LatLng(b.latitude,b.longitude))})}google.maps.event.addDomListener(window,"load",a)});